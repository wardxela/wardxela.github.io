const headerInfoMenu=document.querySelector("[data-info-menu]"),searchInput=document.querySelector("#search-input"),headerMainMenu=document.querySelector(".header-bottom-menu__wrapper"),catalogMenu=document.querySelector(".catalog-menu-outer"),catalogHandler=document.querySelector("[data-catalog-handler]"),catalogLists=document.querySelectorAll("[data-nesting-level]"),productPreviewPopUp=document.querySelector("[data-product-pop-up]");function createCarouselNav(t,a){for(;t.firstElementChild;)t.removeChild(t.firstElementChild);for(let e=0;e<a;e++){const o=document.createElement("button");o.classList.add("carousel-nav-item"),o.dataset.carouselNavIndex=e+1,0===e&&o.classList.add("carousel-nav-item_active"),t.append(o)}}function setCatalogState(e){const t=parseInt(e.dataset.nestingLevel);catalogLists.forEach(e=>{parseInt(e.dataset.nestingLevel)>=t&&e.classList.remove("_opened")}),e.classList.add("_opened"),transformCatalogList(t)}function transformCatalogList(e){document.documentElement.clientWidth<1380&&(document.querySelector(".catalog-menu").style.transform=`translateX(-${100*e}%)`)}function closeCatalogList(){catalogLists.forEach(e=>e.classList.remove("_opened")),transformCatalogList(0)}function carouselHandler(e,t,a=!0){const o=document.querySelector(`#${e}`);var r=calcSlidesCount(o);document.querySelector(`[data-corresponding-carousel="${e}"][data-carousel-btn="-1"]`),document.querySelector(`[data-corresponding-carousel="${e}"][data-carousel-btn="1"]`);let s=a?+o.dataset.carouselCurrentSlide+t:t;s>r?s=1:s<1&&(s=r),setStateOfCarouselNav(e,s),o.style.transform=`translateX(-${100*(s-1)}%)`,o.dataset.carouselCurrentSlide=s}function calcSlidesCount(e){return 0===e.childElementCount?0:Math.ceil(e.childElementCount*e.firstElementChild.offsetWidth/e.offsetWidth)}function setStateOfCarouselNav(e,t){e=document.querySelector(`[data-carousel-nav][data-corresponding-carousel="${e}"]`);if(e)for(var a of e.children)+a.dataset.carouselNavIndex===t?a.classList.add("carousel-nav-item_active"):a.classList.contains("carousel-nav-item_active")&&a.classList.remove("carousel-nav-item_active")}function bodyStateToggler(e){document.body.style.overflow=e?"hidden":null}function fillProductData(e){const t=productPreviewPopUp,o=t.querySelector("#product-preview-images");e=JSON.parse(e),t.querySelector("[data-product-preview-title]").textContent=e.title,t.querySelector("[data-product-preview-reviews-count]").textContent=e.reviewsCount,t.querySelector("[data-product-preview-code]").textContent=e.code,t.querySelector("[data-product-preview-count]").textContent=e.inStock,t.querySelector("[data-product-preview-price]").textContent=e.price,t.querySelector("[data-product-preview-description]").textContent=e.description;let a=0;for(var r of t.querySelector("[data-product-preview-stars]").children)a++<e.stars?r.classList.add("_active"):r.classList.remove("_active");for(;o.firstElementChild;)o.removeChild(o.firstElementChild);e.images.forEach(e=>{const t=document.createElement("div"),a=document.createElement("img");t.className="img-wrapper product-preview-slider__img",a.src=e,t.append(a),o.append(t)}),createCarouselNav(document.querySelector('[data-carousel-nav][data-corresponding-carousel="product-preview-images"]'),calcSlidesCount(o)),carouselHandler(o.id,1,!1)}function accordionHandler(e){e.classList.toggle("_opened");const t=document.querySelector(`#${e.dataset.accordionHandler}`);+t.dataset.accordionOpened?(t.style.height=0,t.dataset.accordionOpened=0):(t.style.height=`${t.scrollHeight}px`,t.dataset.accordionOpened=1)}document.addEventListener("click",e=>{var t;if(e.target.closest(["[data-info-btn]"])?headerInfoMenu.classList.toggle("_opened"):e.target.closest("[data-info-menu]")||headerInfoMenu.classList.remove("_opened"),e.target.closest("[data-open-main-menu]")?(headerMainMenu.classList.add("_opened"),bodyStateToggler(!0)):(!e.target.closest(".header-bottom-menu")&&headerMainMenu.classList.contains("_opened")&&!catalogMenu.classList.contains("_opened")||e.target.closest("[data-close-main-menu]"))&&(headerMainMenu.classList.remove("_opened"),bodyStateToggler(!1)),e.target.closest(".catalog-menu-inner")||e.target.closest("[data-catalog-handler]")||(closeCatalogList(),catalogMenu.classList.remove("_opened")),e.target.closest("[data-carousel-btn]")&&carouselHandler((t=e.target.closest("[data-carousel-btn]")).dataset.correspondingCarousel,+t.dataset.carouselBtn),e.target.closest("[data-carousel-nav-index]")&&carouselHandler((t=e.target.closest("[data-carousel-nav-index]")).parentElement.dataset.correspondingCarousel,+t.dataset.carouselNavIndex,!1),e.target.closest("[data-quick-preview")?(fillProductData(e.target.closest("[data-product-json]").dataset.productJson),productPreviewPopUp.classList.add("_opened"),bodyStateToggler(!0)):e.target.closest("[data-close-product-preview")&&(productPreviewPopUp.classList.remove("_opened"),bodyStateToggler(!1)),e.target.closest("[data-scroll-to-top]")&&window.scrollTo({top:0,behavior:"smooth"}),e.target.closest("[data-accordion-handler]")&&accordionHandler(e.target.closest("[data-accordion-handler]")),e.target.closest("[data-show-more-filters]")){const a=e.target.closest("[data-show-more-filters]");a.previousElementSibling.style.height="100%",a.remove()}if(e.target.closest("[data-show-advanced-filters]")?document.querySelector("[data-advanced-filters]").classList.add("_active"):e.target.closest("[data-hide-advanced-filters]")&&document.querySelector("[data-advanced-filters]").classList.remove("_active"),e.target.closest("[data-input-password-controller]")){e=e.target.closest("[data-input-password-controller]").dataset.inputPasswordController;const o=document.querySelector(`#${e}`);o.type="password"===o.type?"text":"password"}}),catalogHandler.addEventListener("click",e=>{catalogMenu.classList.contains("_opened")&&closeCatalogList(),catalogMenu.classList.toggle("_opened")}),catalogMenu.addEventListener("click",e=>{e.target.closest("[data-open-sub-catalog]")?setCatalogState(e.target.closest(".catalog-menu__item")):e.target.closest("[data-back-to-prev-catalog")&&transformCatalogList(parseInt(e.target.closest("[data-nesting-level]").dataset.nestingLevel)-1)}),searchInput.addEventListener("blur",e=>{searchInput.value?searchInput.nextElementSibling.classList.add("_focused"):searchInput.nextElementSibling.classList.remove("_focused")}),document.querySelectorAll("[data-carousel-current-slide]").forEach(e=>{var t=document.querySelector(`[data-carousel-nav][data-corresponding-carousel="${e.id}"]`);t&&createCarouselNav(t,calcSlidesCount(e))}),document.querySelectorAll("[data-accordion-handler]").forEach(e=>{if(e.classList.contains("_opened")){const t=document.querySelector(`#${e.dataset.accordionHandler}`);console.log(t),t.style.height="auto"}});